{"remainingRequest":"C:\\Users\\User\\vuejsprojects\\App\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\vuejsprojects\\App\\app\\src\\views\\backend\\UploadModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\vuejsprojects\\App\\app\\src\\views\\backend\\UploadModal.vue","mtime":1627583756173},{"path":"C:\\Users\\User\\vuejsprojects\\App\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\vuejsprojects\\App\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\User\\vuejsprojects\\App\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\vuejsprojects\\App\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ3JvcHBlciBmcm9tICJjcm9wcGVyanMiOw0KaW1wb3J0IEltYWdlQ29tcHJlc3NvciBmcm9tICJAeGtlc2hpL2ltYWdlLWNvbXByZXNzb3IiOw0KaW1wb3J0IEZpbGVVcGxvYWQgZnJvbSAidnVlLXVwbG9hZC1jb21wb25lbnQiOw0KaW1wb3J0IFNwaW5uZXIgZnJvbSAiLi4vLi4vbG9hZGVycy9zcGlubmVyLnZ1ZSI7DQppbXBvcnQgQmxvY2sgZnJvbSAiLi4vLi4vbG9hZGVycy9ibG9jay52dWUiOw0KY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpOw0KY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZC9waW5uaW5nL3BpbkZpbGVUb0lQRlNgOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBGaWxlVXBsb2FkLA0KICAgIFNwaW5uZXIsDQogICAgQmxvY2ssDQogIH0sDQogIHByb3BzOiB7DQogICAgT3R0ZXI6IE9iamVjdCwNCiAgICBQb2NrZXQ6IE9iamVjdCwNCiAgICBteUFkZHJlc3M6IFN0cmluZywNCiAgICB3ZWIzOiBPYmplY3QsDQogICAgZmVlOiBOdW1iZXIsDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZpbGVCdWZmZXI6IG51bGwsDQogICAgICBmaWxlczogW10sDQogICAgICBsb2FkaW5nSVBGUzogZmFsc2UsDQogICAgICBsb2FkaW5nQmxvY2tjaGFpbjogZmFsc2UsDQogICAgICBsb2FkaW5nQXBwcm92YWw6IGZhbHNlLA0KICAgICAgYXBwcm92ZWQ6IGZhbHNlLA0KICAgICAgcmVhZHlUb1VwbG9hZDogZmFsc2UsDQogICAgICBoYXNoOiAwLA0KICAgICAgYWNjZXB0OiAiaW1hZ2UvcG5nLGltYWdlL2dpZixpbWFnZS9qcGVnLGltYWdlL3dlYnAvaHRtbCIsDQogICAgICBleHRlbnNpb25zOiAiZ2lmLGpwZyxqcGVnLHBuZyx3ZWJwLG1wNCIsDQogICAgICAvLyBleHRlbnNpb25zOiBbJ2dpZicsICdqcGcnLCAnanBlZycsJ3BuZycsICd3ZWJwJ10sDQogICAgICAvLyBleHRlbnNpb25zOiAvXC4oZ2lmfGpwZT9nfHBuZ3x3ZWJwKSQvaSwNCiAgICAgIG1pblNpemU6IDEwMjQsDQogICAgICBzaXplOiAxMDI0ICogMTAyNCAqIDEwLA0KICAgICAgbXVsdGlwbGU6IGZhbHNlLA0KICAgICAgZGlyZWN0b3J5OiBmYWxzZSwNCiAgICAgIGRyb3A6IHRydWUsDQogICAgICBkcm9wRGlyZWN0b3J5OiB0cnVlLA0KICAgICAgY3JlYXRlRGlyZWN0b3J5OiBmYWxzZSwNCiAgICAgIGFkZEluZGV4OiBmYWxzZSwNCiAgICAgIHRocmVhZDogMywNCiAgICAgIG5hbWU6ICJmaWxlIiwNCiAgICAgIHBvc3RBY3Rpb246ICIvdXBsb2FkL3Bvc3QiLA0KICAgICAgcHV0QWN0aW9uOiAiL3VwbG9hZC9wdXQiLA0KICAgICAgaGVhZGVyczogew0KICAgICAgICAiWC1Dc3JmLVRva2VuIjogInh4eHgiLA0KICAgICAgfSwNCiAgICAgIGRhdGE6IHsNCiAgICAgICAgX2NzcmZfdG9rZW46ICJ4eHh4eHgiLA0KICAgICAgfSwNCiAgICAgIGF1dG9Db21wcmVzczogMTAyNCAqIDEwMjQsDQogICAgICB1cGxvYWRBdXRvOiBmYWxzZSwNCiAgICAgIGlzT3B0aW9uOiBmYWxzZSwNCiAgICAgIGFkZERhdGE6IHsNCiAgICAgICAgc2hvdzogZmFsc2UsDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICB0eXBlOiAiIiwNCiAgICAgICAgY29udGVudDogIiIsDQogICAgICB9LA0KICAgICAgZWRpdEZpbGU6IHsNCiAgICAgICAgc2hvdzogZmFsc2UsDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGZlZUludDogZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZmVlKTsNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgImVkaXRGaWxlLnNob3ciKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgew0KICAgICAgLy8g5YWz6Zet5LqGIOiHquWKqOWIoOmZpCBlcnJvcg0KICAgICAgaWYgKCFuZXdWYWx1ZSAmJiBvbGRWYWx1ZSkgew0KICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZC51cGRhdGUodGhpcy5lZGl0RmlsZS5pZCwgew0KICAgICAgICAgIGVycm9yOiB0aGlzLmVkaXRGaWxlLmVycm9yIHx8ICIiLA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIGlmIChuZXdWYWx1ZSkgew0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgaWYgKCF0aGlzLiRyZWZzLmVkaXRJbWFnZSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgIH0NCiAgICAgICAgICBsZXQgY3JvcHBlciA9IG5ldyBDcm9wcGVyKHRoaXMuJHJlZnMuZWRpdEltYWdlLCB7DQogICAgICAgICAgICBhdXRvQ3JvcDogZmFsc2UsDQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy5lZGl0RmlsZSA9IHsNCiAgICAgICAgICAgIC4uLnRoaXMuZWRpdEZpbGUsDQogICAgICAgICAgICBjcm9wcGVyLA0KICAgICAgICAgIH07DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgImFkZERhdGEuc2hvdyIoc2hvdykgew0KICAgICAgaWYgKHNob3cpIHsNCiAgICAgICAgdGhpcy5hZGREYXRhLm5hbWUgPSAiIjsNCiAgICAgICAgdGhpcy5hZGREYXRhLnR5cGUgPSAiIjsNCiAgICAgICAgdGhpcy5hZGREYXRhLmNvbnRlbnQgPSAiIjsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgYXBwcm92ZSgpIHsNCiAgICAgIHRoaXMubG9hZGluZ0FwcHJvdmFsID0gdHJ1ZTsNCiAgICAgIGF3YWl0IHRoaXMuT3R0ZXIubWV0aG9kcw0KICAgICAgICAuaW5jcmVhc2VBbGxvd2FuY2UoDQogICAgICAgICAgIjB4NTAxQzUwNzRiRWQyODk4N2Q1MGNlNDkzMDE4ZDdjY2RFNkI3QzJkOSIsDQogICAgICAgICAgdGhpcy53ZWIzLnV0aWxzLnRvQk4odGhpcy5mZWVJbnQgKiAxMCAqKiAxOCkNCiAgICAgICAgKQ0KICAgICAgICAuc2VuZCh7IGZyb206IHRoaXMubXlBZGRyZXNzIH0pDQogICAgICAgIC5vbmNlKCJ0cmFuc2FjdGlvbkhhc2giLCBmdW5jdGlvbihoYXNoKSB7DQogICAgICAgICAgY29uc29sZS5sb2coIkFwcHJvdmFsIHR4IEhhc2g6IiwgaGFzaCk7DQogICAgICAgIH0pDQogICAgICAgIC5vbmNlKCJyZWNlaXB0IiwgKHJlY2VpcHQpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZygiQXBwcm92YWwgUmVjZWlwdDoiLCByZWNlaXB0KTsNCiAgICAgICAgICB0aGlzLmxvYWRpbmdBcHByb3ZhbCA9IGZhbHNlOw0KDQogICAgICAgICAgdGhpcy51cGxvYWQoKTsNCiAgICAgICAgfSkNCiAgICAgICAgLm9uKCJlcnJvciIsIChlcnJvcikgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvcjoiLCBlcnJvcik7DQogICAgICAgICAgdGhpcy5sb2FkaW5nQXBwcm92YWwgPSBmYWxzZTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICB1cGxvYWQoKSB7DQogICAgICB0aGlzLmxvYWRpbmdJUEZTID0gdHJ1ZTsNCiAgICAgIHZhciBkYXRhID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICBkYXRhLmFwcGVuZCgnZmlsZScsdGhpcy5maWxlc1swXS5maWxlKTsNCiAgICAgIGF4aW9zLnBvc3QodXJsLCBkYXRhLCB7DQogICAgICAgIG1heEJvZHlMZW5ndGg6ICdJbmZpbml0eScsDQogICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAnQ29udGVudC1UeXBlJzogYG11bHRpcGFydC9mb3JtLWRhdGE7YCwNCiAgICAgICAgICBwaW5hdGFfYXBpX2tleTonNDg2OGQ3YmZiM2E1YzEwOTU5ZWEnLA0KICAgICAgICAgIHBpbmF0YV9zZWNyZXRfYXBpX2tleTonYzQzZGQzZjZiN2VjOWVmZmM3MmU3MzM2NDNjY2ExMjk4YWE3NTYzNDI1Y2I3OTMwNjUwY2FkOWU3ZjE5MjYzMycNCiAgICAgICAgICB9DQogICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKT0+IHsNCiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuZmlsZXNbMF07DQoNCiAgICAgICAgdGhpcy5sb2FkaW5nSVBGUyA9IGZhbHNlOw0KICAgICAgICB0aGlzLmxvYWRpbmdCbG9ja2NoYWluID0gdHJ1ZTsNCg0KICAgICAgICB0aGlzLlBvY2tldC5tZXRob2RzDQogICAgICAgICAgLnVwbG9hZEZpbGUoDQogICAgICAgICAgICByZXNwb25zZS5kYXRhLklwZnNIYXNoLA0KICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5QaW5TaXplLA0KICAgICAgICAgICAgZmlsZS50eXBlLA0KICAgICAgICAgICAgZmlsZS5uYW1lLA0KICAgICAgICAgICAgIkRlc2NyaXB0aW9uIg0KICAgICAgICAgICkNCiAgICAgICAgICAuc2VuZCh7IGZyb206IHRoaXMubXlBZGRyZXNzIH0pDQogICAgICAgICAgLm9uKCJ0cmFuc2FjdGlvbkhhc2giLCAoaGFzaCkgPT4gew0KICAgICAgICAgICAgdGhpcy5oYXNoID0gaGFzaDsNCiAgICAgICAgICAgIHNldEludGVydmFsKCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy53ZWIzLmV0aC5nZXRUcmFuc2FjdGlvbihoYXNoLCAoZXJyLCByZXN1bHQpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidHg6IiwgcmVzdWx0KTsNCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmJsb2NrSGFzaCkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nQmxvY2tjaGFpbiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9LCAxMDAwKTsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5vbigiZXJyb3IiLCAoZSkgPT4gew0KICAgICAgICAgICAgd2luZG93LmFsZXJ0KCJFcnJvciIsIGUpOw0KICAgICAgICAgIH0pOw0KICAgICANCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcik9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICB9KQ0KICAgICAgICAgDQogICAgfSwNCiAgICBmb3JtYXRTaXplKHNpemUpIHsNCiAgICAgIGlmIChzaXplID4gMTAyNCAqIDEwMjQgKiAxMDI0ICogMTAyNCkgew0KICAgICAgICByZXR1cm4gKHNpemUgLyAxMDI0IC8gMTAyNCAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpICsgIiBUQiI7DQogICAgICB9IGVsc2UgaWYgKHNpemUgPiAxMDI0ICogMTAyNCAqIDEwMjQpIHsNCiAgICAgICAgcmV0dXJuIChzaXplIC8gMTAyNCAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpICsgIiBHQiI7DQogICAgICB9IGVsc2UgaWYgKHNpemUgPiAxMDI0ICogMTAyNCkgew0KICAgICAgICByZXR1cm4gKHNpemUgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKSArICIgTUIiOw0KICAgICAgfSBlbHNlIGlmIChzaXplID4gMTAyNCkgew0KICAgICAgICByZXR1cm4gKHNpemUgLyAxMDI0KS50b0ZpeGVkKDIpICsgIiBLQiI7DQogICAgICB9DQogICAgICByZXR1cm4gc2l6ZS50b1N0cmluZygpICsgIiBCIjsNCiAgICB9LA0KICAgIGlucHV0RmlsdGVyKG5ld0ZpbGUsIG9sZEZpbGUsIHByZXZlbnQpIHsNCiAgICAgIGlmIChuZXdGaWxlICYmICFvbGRGaWxlKSB7DQogICAgICAgIC8vIEJlZm9yZSBhZGRpbmcgYSBmaWxlDQogICAgICAgIC8vIOa3u+WKoOaWh+S7tuWJjQ0KICAgICAgICAvLyBGaWx0ZXIgc3lzdGVtIGZpbGVzIG9yIGhpZGUgZmlsZXMNCiAgICAgICAgLy8g6L+H5ruk57O757uf5paH5Lu2IOWSjOmakOiXj+aWh+S7tg0KICAgICAgICBpZiAoLyhcL3xeKShUaHVtYnNcLmRifGRlc2t0b3BcLmluaXxcLi4rKSQvLnRlc3QobmV3RmlsZS5uYW1lKSkgew0KICAgICAgICAgIHJldHVybiBwcmV2ZW50KCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gRmlsdGVyIHBocCBodG1sIGpzIGZpbGUNCiAgICAgICAgLy8g6L+H5rukIHBocCBodG1sIGpzIOaWh+S7tg0KICAgICAgICBpZiAoL1wuKHBocDU/fGpzeD8pJC9pLnRlc3QobmV3RmlsZS5uYW1lKSkgew0KICAgICAgICAgIHJldHVybiBwcmV2ZW50KCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gQXV0b21hdGljIGNvbXByZXNzaW9uDQogICAgICAgIC8vIOiHquWKqOWOi+e8qQ0KICAgICAgICBpZiAoDQogICAgICAgICAgbmV3RmlsZS5maWxlICYmDQogICAgICAgICAgbmV3RmlsZS5lcnJvciA9PT0gIiIgJiYNCiAgICAgICAgICBuZXdGaWxlLnR5cGUuc3Vic3RyKDAsIDYpID09PSAiaW1hZ2UvIiAmJg0KICAgICAgICAgIHRoaXMuYXV0b0NvbXByZXNzID4gMCAmJg0KICAgICAgICAgIHRoaXMuYXV0b0NvbXByZXNzIDwgbmV3RmlsZS5zaXplDQogICAgICAgICkgew0KICAgICAgICAgIG5ld0ZpbGUuZXJyb3IgPSAiY29tcHJlc3NpbmciOw0KICAgICAgICAgIGNvbnN0IGltYWdlQ29tcHJlc3NvciA9IG5ldyBJbWFnZUNvbXByZXNzb3IobnVsbCwgew0KICAgICAgICAgICAgY29udmVydFNpemU6IDEwMjQgKiAxMDI0LA0KICAgICAgICAgICAgbWF4V2lkdGg6IDUxMiwNCiAgICAgICAgICAgIG1heEhlaWdodDogNTEyLA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGltYWdlQ29tcHJlc3Nvcg0KICAgICAgICAgICAgLmNvbXByZXNzKG5ld0ZpbGUuZmlsZSkNCiAgICAgICAgICAgIC50aGVuKChmaWxlKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJHJlZnMudXBsb2FkLnVwZGF0ZShuZXdGaWxlLCB7DQogICAgICAgICAgICAgICAgZXJyb3I6ICIiLA0KICAgICAgICAgICAgICAgIGZpbGUsDQogICAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplLA0KICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kcmVmcy51cGxvYWQudXBkYXRlKG5ld0ZpbGUsIHsNCiAgICAgICAgICAgICAgICBlcnJvcjogZXJyLm1lc3NhZ2UgfHwgImNvbXByZXNzIiwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKA0KICAgICAgICBuZXdGaWxlICYmDQogICAgICAgIG5ld0ZpbGUuZXJyb3IgPT09ICIiICYmDQogICAgICAgIG5ld0ZpbGUuZmlsZSAmJg0KICAgICAgICAoIW9sZEZpbGUgfHwgbmV3RmlsZS5maWxlICE9PSBvbGRGaWxlLmZpbGUpDQogICAgICApIHsNCiAgICAgICAgLy8gQ3JlYXRlIGEgYmxvYiBmaWVsZA0KICAgICAgICAvLyDliJvlu7ogYmxvYiDlrZfmrrUNCiAgICAgICAgbmV3RmlsZS5ibG9iID0gIiI7DQogICAgICAgIGxldCBVUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkw7DQogICAgICAgIGlmIChVUkwpIHsNCiAgICAgICAgICBuZXdGaWxlLmJsb2IgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ld0ZpbGUuZmlsZSk7DQogICAgICAgIH0NCiAgICAgICAgLy8gVGh1bWJuYWlscw0KICAgICAgICAvLyDnvKnnlaXlm74NCiAgICAgICAgbmV3RmlsZS50aHVtYiA9ICIiOw0KICAgICAgICBpZiAobmV3RmlsZS5ibG9iICYmIG5ld0ZpbGUudHlwZS5zdWJzdHIoMCwgNikgPT09ICJpbWFnZS8iKSB7DQogICAgICAgICAgbmV3RmlsZS50aHVtYiA9IG5ld0ZpbGUuYmxvYjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLy8gaW1hZ2Ugc2l6ZQ0KICAgICAgLy8gaW1hZ2Ug5bC65a+4DQogICAgICBpZiAoDQogICAgICAgIG5ld0ZpbGUgJiYNCiAgICAgICAgbmV3RmlsZS5lcnJvciA9PT0gIiIgJiYNCiAgICAgICAgbmV3RmlsZS50eXBlLnN1YnN0cigwLCA2KSA9PT0gImltYWdlLyIgJiYNCiAgICAgICAgbmV3RmlsZS5ibG9iICYmDQogICAgICAgICghb2xkRmlsZSB8fCBuZXdGaWxlLmJsb2IgIT09IG9sZEZpbGUuYmxvYikNCiAgICAgICkgew0KICAgICAgICBuZXdGaWxlLmVycm9yID0gImltYWdlIHBhcnNpbmciOw0KICAgICAgICBsZXQgaW1nID0gbmV3IEltYWdlKCk7DQogICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7DQogICAgICAgICAgdGhpcy4kcmVmcy51cGxvYWQudXBkYXRlKG5ld0ZpbGUsIHsNCiAgICAgICAgICAgIGVycm9yOiAiIiwNCiAgICAgICAgICAgIGhlaWdodDogaW1nLmhlaWdodCwNCiAgICAgICAgICAgIHdpZHRoOiBpbWcud2lkdGgsDQogICAgICAgICAgfSk7DQogICAgICAgIH07DQogICAgICAgIGltZy7Ov25lcnLOv3IgPSAoKSA9PiB7DQogICAgICAgICAgdGhpcy4kcmVmcy51cGxvYWQudXBkYXRlKG5ld0ZpbGUsIHsgZXJyb3I6ICJwYXJzaW5nIGltYWdlIHNpemUiIH0pOw0KICAgICAgICB9Ow0KICAgICAgICBpbWcuc3JjID0gbmV3RmlsZS5ibG9iOw0KICAgICAgfQ0KICAgIH0sDQogICAgLy8gYWRkLCB1cGRhdGUsIHJlbW92ZSBGaWxlIEV2ZW50DQogICAgaW5wdXRGaWxlKG5ld0ZpbGUsIG9sZEZpbGUpIHsNCiAgICAgIGlmIChuZXdGaWxlKSB7DQogICAgICAgIGNvbnN0IGZpbGUgPSBuZXdGaWxlLmZpbGU7DQoNCiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IHdpbmRvdy5GaWxlUmVhZGVyKCk7DQoNCiAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOw0KICAgICAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4gew0KICAgICAgICAgIHRoaXMuZmlsZUJ1ZmZlciA9IEJ1ZmZlcihyZWFkZXIucmVzdWx0KTsNCiAgICAgICAgICBpZiAodGhpcy5maWxlQnVmZmVyKSB7DQogICAgICAgICAgICB0aGlzLnJlYWR5VG9VcGxvYWQgPSB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICAgIH0NCg0KICAgICAgaWYgKCFuZXdGaWxlICYmIG9sZEZpbGUpIHsNCiAgICAgICAgLy8gcmVtb3ZlDQogICAgICAgIGlmIChvbGRGaWxlLnN1Y2Nlc3MgJiYgb2xkRmlsZS5yZXNwb25zZS5pZCkgew0KICAgICAgICAgIC8vICQuYWpheCh7DQogICAgICAgICAgLy8gICB0eXBlOiAnREVMRVRFJywNCiAgICAgICAgICAvLyAgIHVybDogJy91cGxvYWQvZGVsZXRlP2lkPScgKyBvbGRGaWxlLnJlc3BvbnNlLmlkLA0KICAgICAgICAgIC8vIH0pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgYWN0aXZhdGUgdXBsb2FkDQogICAgICBpZiAoDQogICAgICAgIEJvb2xlYW4obmV3RmlsZSkgIT09IEJvb2xlYW4ob2xkRmlsZSkgfHwNCiAgICAgICAgb2xkRmlsZS5lcnJvciAhPT0gbmV3RmlsZS5lcnJvcg0KICAgICAgKSB7DQogICAgICAgIGlmICh0aGlzLnVwbG9hZEF1dG8gJiYgIXRoaXMuJHJlZnMudXBsb2FkLmFjdGl2ZSkgew0KICAgICAgICAgIHRoaXMuJHJlZnMudXBsb2FkLmFjdGl2ZSA9IHRydWU7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGFsZXJ0KG1lc3NhZ2UpIHsNCiAgICAgIGFsZXJ0KG1lc3NhZ2UpOw0KICAgIH0sDQogICAgb25FZGl0RmlsZVNob3coZmlsZSkgew0KICAgICAgdGhpcy5lZGl0RmlsZSA9IHsgLi4uZmlsZSwgc2hvdzogdHJ1ZSB9Ow0KICAgICAgdGhpcy4kcmVmcy51cGxvYWQudXBkYXRlKGZpbGUsIHsgZXJyb3I6ICJlZGl0IiB9KTsNCiAgICB9LA0KICAgIG9uRWRpdG9yRmlsZSgpIHsNCiAgICAgIGlmICghdGhpcy4kcmVmcy51cGxvYWQuZmVhdHVyZXMuaHRtbDUpIHsNCiAgICAgICAgdGhpcy5hbGVydCgiWW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQiKTsNCiAgICAgICAgdGhpcy5lZGl0RmlsZS5zaG93ID0gZmFsc2U7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGxldCBkYXRhID0gew0KICAgICAgICBuYW1lOiB0aGlzLmVkaXRGaWxlLm5hbWUsDQogICAgICAgIGVycm9yOiAiIiwNCiAgICAgIH07DQogICAgICBpZiAodGhpcy5lZGl0RmlsZS5jcm9wcGVyKSB7DQogICAgICAgIGxldCBiaW5TdHIgPSBhdG9iKA0KICAgICAgICAgIHRoaXMuZWRpdEZpbGUuY3JvcHBlcg0KICAgICAgICAgICAgLmdldENyb3BwZWRDYW52YXMoKQ0KICAgICAgICAgICAgLnRvRGF0YVVSTCh0aGlzLmVkaXRGaWxlLnR5cGUpDQogICAgICAgICAgICAuc3BsaXQoIiwiKVsxXQ0KICAgICAgICApOw0KICAgICAgICBsZXQgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYmluU3RyLmxlbmd0aCk7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluU3RyLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgYXJyW2ldID0gYmluU3RyLmNoYXJDb2RlQXQoaSk7DQogICAgICAgIH0NCiAgICAgICAgZGF0YS5maWxlID0gbmV3IEZpbGUoW2Fycl0sIGRhdGEubmFtZSwgeyB0eXBlOiB0aGlzLmVkaXRGaWxlLnR5cGUgfSk7DQogICAgICAgIGRhdGEuc2l6ZSA9IGRhdGEuZmlsZS5zaXplOw0KICAgICAgfQ0KICAgICAgdGhpcy4kcmVmcy51cGxvYWQudXBkYXRlKHRoaXMuZWRpdEZpbGUuaWQsIGRhdGEpOw0KICAgICAgdGhpcy5lZGl0RmlsZS5lcnJvciA9ICIiOw0KICAgICAgdGhpcy5lZGl0RmlsZS5zaG93ID0gZmFsc2U7DQogICAgfSwNCiAgICAvLyBhZGQgZm9sZGVyDQogICAgb25BZGRGb2xkZXIoKSB7DQogICAgICBpZiAoIXRoaXMuJHJlZnMudXBsb2FkLmZlYXR1cmVzLmRpcmVjdG9yeSkgew0KICAgICAgICB0aGlzLmFsZXJ0KCJZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBsZXQgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOw0KICAgICAgaW5wdXQuc3R5bGUgPQ0KICAgICAgICAiYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwKTtvdmVyZmxvdzogaGlkZGVuO3Bvc2l0aW9uOiBmaXhlZDt3aWR0aDogMXB4O2hlaWdodDogMXB4O3otaW5kZXg6IC0xO29wYWNpdHk6IDA7IjsNCiAgICAgIGlucHV0LnR5cGUgPSAiZmlsZSI7DQogICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoImFsbG93ZGlycyIsIHRydWUpOw0KICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCJkaXJlY3RvcnkiLCB0cnVlKTsNCiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgid2Via2l0ZGlyZWN0b3J5IiwgdHJ1ZSk7DQogICAgICBpbnB1dC5tdWx0aXBsZSA9IHRydWU7DQogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJib2R5IikuYXBwZW5kQ2hpbGQoaW5wdXQpOw0KICAgICAgaW5wdXQuY2xpY2soKTsNCiAgICAgIGlucHV0Lm9uY2hhbmdlID0gKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZC5hZGRJbnB1dEZpbGUoaW5wdXQpLnRoZW4oZnVuY3Rpb24oKSB7DQogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYm9keSIpLnJlbW92ZUNoaWxkKGlucHV0KTsNCiAgICAgICAgfSk7DQogICAgICB9Ow0KICAgIH0sDQogICAgb25BZGREYXRhKCkgew0KICAgICAgY29uc29sZS5sb2coIkFkZGluZyBEYXRhLi4uIik7DQogICAgICB0aGlzLmFkZERhdGEuc2hvdyA9IGZhbHNlOw0KICAgICAgaWYgKCF0aGlzLiRyZWZzLnVwbG9hZC5mZWF0dXJlcy5odG1sNSkgew0KICAgICAgICB0aGlzLmFsZXJ0KCJZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBsZXQgZmlsZSA9IG5ldyB3aW5kb3cuRmlsZShbdGhpcy5hZGREYXRhLmNvbnRlbnRdLCB0aGlzLmFkZERhdGEubmFtZSwgew0KICAgICAgICB0eXBlOiB0aGlzLmFkZERhdGEudHlwZSwNCiAgICAgIH0pOw0KICAgICAgdGhpcy4kcmVmcy51cGxvYWQuYWRkKGZpbGUpOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["UploadModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0MA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UploadModal.vue","sourceRoot":"src/views/backend","sourcesContent":["<template>\r\n  <div class=\"example-full\">\r\n    <div v-show=\"$refs.upload && $refs.upload.dropActive\" class=\"drop-active\">\r\n      <h3>Drop files here to see</h3>\r\n    </div>\r\n    <div class=\"upload\" v-show=\"!isOption\">\r\n      <div class=\"table-responsive\">\r\n        <table class=\"table table-hover\">\r\n          <thead>\r\n            <tr>\r\n              <th>Thumb</th>\r\n              <th>Name</th>\r\n              <th>Type</th>\r\n              <th>Size</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-if=\"!files.length\">\r\n              <td colspan=\"9\">\r\n                <div class=\"text-center p-5\">\r\n                  <h4>Drop files anywhere to upload<br />or</h4>\r\n                  <label :for=\"name\" class=\"btn btn-lg btn-primary\"\r\n                    >Select Files</label\r\n                  >\r\n                </div>\r\n              </td>\r\n            </tr>\r\n            <tr v-for=\"file in files\" :key=\"file.id\">\r\n              <td>\r\n                <img\r\n                  class=\"td-image-thumb\"\r\n                  v-if=\"file.thumb\"\r\n                  :src=\"file.thumb\"\r\n                  style=\"max-width: 10em !important;\"\r\n                />\r\n                <span v-if=\"file.type.includes('video')\"\r\n                  ><img src=\"./video.png\" alt=\"\" style=\"max-width: 10em;\"\r\n                /></span>\r\n              </td>\r\n              <td>\r\n                <div class=\"filename\">\r\n                  {{ file.name }}\r\n                </div>\r\n              </td>\r\n              <td>{{ file.type }}</td>\r\n              <td>{{ formatSize(file.size) }}</td>\r\n              <td>\r\n                <div class=\"btn-group\">\r\n                  <button class=\"btn\" type=\"button\">\r\n                    <a\r\n                      class=\"dropdown-item\"\r\n                      href=\"#\"\r\n                      @click.prevent=\"$refs.upload.remove(file)\"\r\n                      >Remove</a\r\n                    >\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div class=\"loader\" v-if=\"loadingIPFS\">\r\n        <Spinner />\r\n        Uploading file to IPFS...\r\n      </div>\r\n      <div class=\"loader\" v-if=\"loadingBlockchain\">\r\n        <Block />\r\n        Uploading data to Blockchain...\r\n        <a :href=\"`https://polygonscan.com/tx/${hash}`\">TX</a>\r\n      </div>\r\n      <div class=\"loader\" v-if=\"loadingApproval\">\r\n        <Block />\r\n        Will cost {{fee}} Otter. Waiting for Approval\r\n      </div>\r\n      <div class=\"example-footer\">\r\n        <div class=\"btn-group\">\r\n          <file-upload\r\n            class=\"btn btn-primary\"\r\n            :post-action=\"postAction\"\r\n            :put-action=\"putAction\"\r\n            :multiple=\"multiple\"\r\n            :directory=\"directory\"\r\n            :create-directory=\"createDirectory\"\r\n            :size=\"size || 0\"\r\n            :thread=\"thread < 1 ? 1 : thread > 5 ? 5 : thread\"\r\n            :headers=\"headers\"\r\n            :data=\"data\"\r\n            :drop=\"drop\"\r\n            :drop-directory=\"dropDirectory\"\r\n            :add-index=\"addIndex\"\r\n            v-model=\"files\"\r\n            @input-filter=\"inputFilter\"\r\n            @input-file=\"inputFile\"\r\n            ref=\"upload\"\r\n          >\r\n            <i class=\"fa fa-plus\"></i>\r\n            Select\r\n          </file-upload>\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-success\"\r\n          v-if=\"readyToUpload\"\r\n          @click=\"approve()\"\r\n        >\r\n          <i class=\"fa fa-upload\" aria-hidden=\"true\"></i>\r\n          Upload\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n.example-footer {\r\n  position: absolute;\r\n  bottom: 1em;\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n\r\n.example-full {\r\n  height: 80%;\r\n  color: white !important;\r\n}\r\n.example-full .btn-group .dropdown-menu {\r\n  display: block;\r\n  visibility: hidden;\r\n  transition: all 0.2s;\r\n}\r\n.example-full .btn-group:hover > .dropdown-menu {\r\n  visibility: visible;\r\n}\r\n.example-full label.dropdown-item {\r\n  margin-bottom: 0;\r\n}\r\n.example-full .btn-group .dropdown-toggle {\r\n  margin-right: 0.6rem;\r\n}\r\n.td-image-thumb {\r\n  max-width: 4em;\r\n  max-height: 4em;\r\n}\r\n.example-full .filename {\r\n  margin-bottom: 0.3rem;\r\n  color: rgb(85, 147, 240);\r\n}\r\n.example-full .btn-is-option {\r\n  margin-top: 0.25rem;\r\n}\r\n.example-full .example-foorer {\r\n  padding: 0.5rem 0;\r\n  border-top: 1px solid #e9ecef;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n.example-full .edit-image img {\r\n  max-width: 100%;\r\n}\r\n.example-full .edit-image-tool {\r\n  margin-top: 0.6rem;\r\n}\r\n.example-full .edit-image-tool .btn-group {\r\n  margin-right: 0.6rem;\r\n}\r\n.example-full .footer-status {\r\n  padding-top: 0.4rem;\r\n}\r\n.example-full .drop-active {\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  left: 0;\r\n  position: fixed;\r\n  z-index: 1;\r\n  opacity: 0.6;\r\n  text-align: center;\r\n  background: #000;\r\n}\r\n.example-full .drop-active h3 {\r\n  margin: -0.5em 0 0;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  -webkit-transform: translateY(-50%);\r\n  -ms-transform: translateY(-50%);\r\n  transform: translateY(-50%);\r\n  font-size: 40px;\r\n  color: #fff;\r\n  padding: 0;\r\n}\r\n.loader {\r\n  background: rgba(0, 76, 148, 0.912);\r\n  height: max-content;\r\n  width: max-content;\r\n  padding: 5em;\r\n  border-radius: 2em;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport Cropper from \"cropperjs\";\r\nimport ImageCompressor from \"@xkeshi/image-compressor\";\r\nimport FileUpload from \"vue-upload-component\";\r\nimport Spinner from \"../../loaders/spinner.vue\";\r\nimport Block from \"../../loaders/block.vue\";\r\nconst axios = require('axios');\r\nconst url = `https://api.pinata.cloud/pinning/pinFileToIPFS`;\r\n\r\nexport default {\r\n  components: {\r\n    FileUpload,\r\n    Spinner,\r\n    Block,\r\n  },\r\n  props: {\r\n    Otter: Object,\r\n    Pocket: Object,\r\n    myAddress: String,\r\n    web3: Object,\r\n    fee: Number,\r\n  },\r\n  data() {\r\n    return {\r\n      fileBuffer: null,\r\n      files: [],\r\n      loadingIPFS: false,\r\n      loadingBlockchain: false,\r\n      loadingApproval: false,\r\n      approved: false,\r\n      readyToUpload: false,\r\n      hash: 0,\r\n      accept: \"image/png,image/gif,image/jpeg,image/webp/html\",\r\n      extensions: \"gif,jpg,jpeg,png,webp,mp4\",\r\n      // extensions: ['gif', 'jpg', 'jpeg','png', 'webp'],\r\n      // extensions: /\\.(gif|jpe?g|png|webp)$/i,\r\n      minSize: 1024,\r\n      size: 1024 * 1024 * 10,\r\n      multiple: false,\r\n      directory: false,\r\n      drop: true,\r\n      dropDirectory: true,\r\n      createDirectory: false,\r\n      addIndex: false,\r\n      thread: 3,\r\n      name: \"file\",\r\n      postAction: \"/upload/post\",\r\n      putAction: \"/upload/put\",\r\n      headers: {\r\n        \"X-Csrf-Token\": \"xxxx\",\r\n      },\r\n      data: {\r\n        _csrf_token: \"xxxxxx\",\r\n      },\r\n      autoCompress: 1024 * 1024,\r\n      uploadAuto: false,\r\n      isOption: false,\r\n      addData: {\r\n        show: false,\r\n        name: \"\",\r\n        type: \"\",\r\n        content: \"\",\r\n      },\r\n      editFile: {\r\n        show: false,\r\n        name: \"\",\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    feeInt: function () {\r\n      return parseInt(this.fee);\r\n    }\r\n  },\r\n  watch: {\r\n    \"editFile.show\"(newValue, oldValue) {\r\n      // 关闭了 自动删除 error\r\n      if (!newValue && oldValue) {\r\n        this.$refs.upload.update(this.editFile.id, {\r\n          error: this.editFile.error || \"\",\r\n        });\r\n      }\r\n      if (newValue) {\r\n        this.$nextTick(() => {\r\n          if (!this.$refs.editImage) {\r\n            return;\r\n          }\r\n          let cropper = new Cropper(this.$refs.editImage, {\r\n            autoCrop: false,\r\n          });\r\n          this.editFile = {\r\n            ...this.editFile,\r\n            cropper,\r\n          };\r\n        });\r\n      }\r\n    },\r\n    \"addData.show\"(show) {\r\n      if (show) {\r\n        this.addData.name = \"\";\r\n        this.addData.type = \"\";\r\n        this.addData.content = \"\";\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    async approve() {\r\n      this.loadingApproval = true;\r\n      await this.Otter.methods\r\n        .increaseAllowance(\r\n          \"0x501C5074bEd28987d50ce493018d7ccdE6B7C2d9\",\r\n          this.web3.utils.toBN(this.feeInt * 10 ** 18)\r\n        )\r\n        .send({ from: this.myAddress })\r\n        .once(\"transactionHash\", function(hash) {\r\n          console.log(\"Approval tx Hash:\", hash);\r\n        })\r\n        .once(\"receipt\", (receipt) => {\r\n          console.log(\"Approval Receipt:\", receipt);\r\n          this.loadingApproval = false;\r\n\r\n          this.upload();\r\n        })\r\n        .on(\"error\", (error) => {\r\n          console.log(\"Error:\", error);\r\n          this.loadingApproval = false;\r\n        });\r\n    },\r\n    upload() {\r\n      this.loadingIPFS = true;\r\n      var data = new FormData();\r\n      data.append('file',this.files[0].file);\r\n      axios.post(url, data, {\r\n        maxBodyLength: 'Infinity',\r\n        headers: {\r\n          'Content-Type': `multipart/form-data;`,\r\n          pinata_api_key:'4868d7bfb3a5c10959ea',\r\n          pinata_secret_api_key:'c43dd3f6b7ec9effc72e733643cca1298aa7563425cb7930650cad9e7f192633'\r\n          }\r\n        }).then((response)=> {\r\n        const file = this.files[0];\r\n\r\n        this.loadingIPFS = false;\r\n        this.loadingBlockchain = true;\r\n\r\n        this.Pocket.methods\r\n          .uploadFile(\r\n            response.data.IpfsHash,\r\n            response.data.PinSize,\r\n            file.type,\r\n            file.name,\r\n            \"Description\"\r\n          )\r\n          .send({ from: this.myAddress })\r\n          .on(\"transactionHash\", (hash) => {\r\n            this.hash = hash;\r\n            setInterval(() => {\r\n              this.web3.eth.getTransaction(hash, (err, result) => {\r\n                console.log(\"tx:\", result);\r\n                if (result.blockHash) {\r\n                  this.loadingBlockchain = false;\r\n                  window.location.reload();\r\n                }\r\n              });\r\n            }, 1000);\r\n          })\r\n          .on(\"error\", (e) => {\r\n            window.alert(\"Error\", e);\r\n          });\r\n     \r\n        })\r\n        .catch((error)=> {\r\n          console.log(error);\r\n        })\r\n         \r\n    },\r\n    formatSize(size) {\r\n      if (size > 1024 * 1024 * 1024 * 1024) {\r\n        return (size / 1024 / 1024 / 1024 / 1024).toFixed(2) + \" TB\";\r\n      } else if (size > 1024 * 1024 * 1024) {\r\n        return (size / 1024 / 1024 / 1024).toFixed(2) + \" GB\";\r\n      } else if (size > 1024 * 1024) {\r\n        return (size / 1024 / 1024).toFixed(2) + \" MB\";\r\n      } else if (size > 1024) {\r\n        return (size / 1024).toFixed(2) + \" KB\";\r\n      }\r\n      return size.toString() + \" B\";\r\n    },\r\n    inputFilter(newFile, oldFile, prevent) {\r\n      if (newFile && !oldFile) {\r\n        // Before adding a file\r\n        // 添加文件前\r\n        // Filter system files or hide files\r\n        // 过滤系统文件 和隐藏文件\r\n        if (/(\\/|^)(Thumbs\\.db|desktop\\.ini|\\..+)$/.test(newFile.name)) {\r\n          return prevent();\r\n        }\r\n        // Filter php html js file\r\n        // 过滤 php html js 文件\r\n        if (/\\.(php5?|jsx?)$/i.test(newFile.name)) {\r\n          return prevent();\r\n        }\r\n        // Automatic compression\r\n        // 自动压缩\r\n        if (\r\n          newFile.file &&\r\n          newFile.error === \"\" &&\r\n          newFile.type.substr(0, 6) === \"image/\" &&\r\n          this.autoCompress > 0 &&\r\n          this.autoCompress < newFile.size\r\n        ) {\r\n          newFile.error = \"compressing\";\r\n          const imageCompressor = new ImageCompressor(null, {\r\n            convertSize: 1024 * 1024,\r\n            maxWidth: 512,\r\n            maxHeight: 512,\r\n          });\r\n          imageCompressor\r\n            .compress(newFile.file)\r\n            .then((file) => {\r\n              this.$refs.upload.update(newFile, {\r\n                error: \"\",\r\n                file,\r\n                size: file.size,\r\n                type: file.type,\r\n              });\r\n            })\r\n            .catch((err) => {\r\n              this.$refs.upload.update(newFile, {\r\n                error: err.message || \"compress\",\r\n              });\r\n            });\r\n        }\r\n      }\r\n      if (\r\n        newFile &&\r\n        newFile.error === \"\" &&\r\n        newFile.file &&\r\n        (!oldFile || newFile.file !== oldFile.file)\r\n      ) {\r\n        // Create a blob field\r\n        // 创建 blob 字段\r\n        newFile.blob = \"\";\r\n        let URL = window.URL || window.webkitURL;\r\n        if (URL) {\r\n          newFile.blob = URL.createObjectURL(newFile.file);\r\n        }\r\n        // Thumbnails\r\n        // 缩略图\r\n        newFile.thumb = \"\";\r\n        if (newFile.blob && newFile.type.substr(0, 6) === \"image/\") {\r\n          newFile.thumb = newFile.blob;\r\n        }\r\n      }\r\n      // image size\r\n      // image 尺寸\r\n      if (\r\n        newFile &&\r\n        newFile.error === \"\" &&\r\n        newFile.type.substr(0, 6) === \"image/\" &&\r\n        newFile.blob &&\r\n        (!oldFile || newFile.blob !== oldFile.blob)\r\n      ) {\r\n        newFile.error = \"image parsing\";\r\n        let img = new Image();\r\n        img.onload = () => {\r\n          this.$refs.upload.update(newFile, {\r\n            error: \"\",\r\n            height: img.height,\r\n            width: img.width,\r\n          });\r\n        };\r\n        img.οnerrοr = () => {\r\n          this.$refs.upload.update(newFile, { error: \"parsing image size\" });\r\n        };\r\n        img.src = newFile.blob;\r\n      }\r\n    },\r\n    // add, update, remove File Event\r\n    inputFile(newFile, oldFile) {\r\n      if (newFile) {\r\n        const file = newFile.file;\r\n\r\n        const reader = new window.FileReader();\r\n\r\n        reader.readAsArrayBuffer(file);\r\n        reader.onloadend = () => {\r\n          this.fileBuffer = Buffer(reader.result);\r\n          if (this.fileBuffer) {\r\n            this.readyToUpload = true;\r\n          }\r\n        };\r\n      }\r\n\r\n      if (!newFile && oldFile) {\r\n        // remove\r\n        if (oldFile.success && oldFile.response.id) {\r\n          // $.ajax({\r\n          //   type: 'DELETE',\r\n          //   url: '/upload/delete?id=' + oldFile.response.id,\r\n          // })\r\n        }\r\n      }\r\n      // Automatically activate upload\r\n      if (\r\n        Boolean(newFile) !== Boolean(oldFile) ||\r\n        oldFile.error !== newFile.error\r\n      ) {\r\n        if (this.uploadAuto && !this.$refs.upload.active) {\r\n          this.$refs.upload.active = true;\r\n        }\r\n      }\r\n    },\r\n    alert(message) {\r\n      alert(message);\r\n    },\r\n    onEditFileShow(file) {\r\n      this.editFile = { ...file, show: true };\r\n      this.$refs.upload.update(file, { error: \"edit\" });\r\n    },\r\n    onEditorFile() {\r\n      if (!this.$refs.upload.features.html5) {\r\n        this.alert(\"Your browser does not support\");\r\n        this.editFile.show = false;\r\n        return;\r\n      }\r\n      let data = {\r\n        name: this.editFile.name,\r\n        error: \"\",\r\n      };\r\n      if (this.editFile.cropper) {\r\n        let binStr = atob(\r\n          this.editFile.cropper\r\n            .getCroppedCanvas()\r\n            .toDataURL(this.editFile.type)\r\n            .split(\",\")[1]\r\n        );\r\n        let arr = new Uint8Array(binStr.length);\r\n        for (let i = 0; i < binStr.length; i++) {\r\n          arr[i] = binStr.charCodeAt(i);\r\n        }\r\n        data.file = new File([arr], data.name, { type: this.editFile.type });\r\n        data.size = data.file.size;\r\n      }\r\n      this.$refs.upload.update(this.editFile.id, data);\r\n      this.editFile.error = \"\";\r\n      this.editFile.show = false;\r\n    },\r\n    // add folder\r\n    onAddFolder() {\r\n      if (!this.$refs.upload.features.directory) {\r\n        this.alert(\"Your browser does not support\");\r\n        return;\r\n      }\r\n      let input = document.createElement(\"input\");\r\n      input.style =\r\n        \"background: rgba(255, 255, 255, 0);overflow: hidden;position: fixed;width: 1px;height: 1px;z-index: -1;opacity: 0;\";\r\n      input.type = \"file\";\r\n      input.setAttribute(\"allowdirs\", true);\r\n      input.setAttribute(\"directory\", true);\r\n      input.setAttribute(\"webkitdirectory\", true);\r\n      input.multiple = true;\r\n      document.querySelector(\"body\").appendChild(input);\r\n      input.click();\r\n      input.onchange = () => {\r\n        this.$refs.upload.addInputFile(input).then(function() {\r\n          document.querySelector(\"body\").removeChild(input);\r\n        });\r\n      };\r\n    },\r\n    onAddData() {\r\n      console.log(\"Adding Data...\");\r\n      this.addData.show = false;\r\n      if (!this.$refs.upload.features.html5) {\r\n        this.alert(\"Your browser does not support\");\r\n        return;\r\n      }\r\n      let file = new window.File([this.addData.content], this.addData.name, {\r\n        type: this.addData.type,\r\n      });\r\n      this.$refs.upload.add(file);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}